(()=>{"use strict";class e{constructor(e,t,o,n,l,c){this.title=e,this.description=t,this.dueDate=o,this.priority=n,this.project=l,this.complete=c}}let t=["Default project"],o=[];function n(e){e.forEach((e=>{if(null===document.getElementById(e)){const t=document.getElementById("content"),o=document.createElement("div"),n=document.createElement("ul"),l=document.createElement("h2");l.innerHTML=e,n.id=e,n.appendChild(l),o.appendChild(n),t.appendChild(o)}}))}function l(e,t){if(null===document.getElementById(e)){const n=document.getElementById(t).appendChild(document.createElement("li")),l=document.createElement("input");l.type="checkbox",l.id=e,l.name=e,n.appendChild(l);let c=document.createElement("p");c.innerHTML=e,n.appendChild(c);let i=document.createElement("button");i.classList.add("more"),i.textContent="more",n.appendChild(i),console.log(n.innerText),i.addEventListener("click",(()=>{o.forEach((e=>{console.log(e.title),c.textContent===e.title&&function(e){const t=document.getElementById("content"),o=document.createElement("div");o.appendChild(document.createElement("p")).textContent=`Title: ${e.title} \n Description: ${e.description} \n Due: ${e.dueDate} \n Priority: ${e.priority}`,o.id="popup",t.appendChild(o);const n=o.appendChild(document.createElement("button"));n.textContent="close popup",n.addEventListener("click",(()=>{o.remove()}))}(e)}))}));let r=document.createElement("button");r.classList.add("dlt"),r.textContent="X",n.appendChild(r),r.addEventListener("click",(()=>{for(let e=0;e<o.length;e++)console.log(o[e].title+"moreX"),console.log(r.parentElement.textContent),o[e].title+"moreX"===r.parentElement.textContent&&o.splice(e,1);localStorage.setItem("items",JSON.stringify(o)),console.log(JSON.parse(localStorage.getItem("items"))),console.log(o),r.parentElement.remove()})),l.addEventListener("change",(()=>{for(let t=0;t<o.length;t++)o[t].title===e&&(l.checked&&(o[t].complete=!0,localStorage.setItem("items",JSON.stringify(o)),console.log(o),console.log(JSON.parse(localStorage.getItem("items"))),c.style.textDecoration="line-through"),!1===l.checked&&(o[t].complete=!1,localStorage.setItem("items",JSON.stringify(o)),console.log(o),console.log(o[t].complete),c.style.textDecoration="none"))}))}}function c(e){let t=document.getElementById("project");t.innerHTML="",e.forEach((e=>{let o=document.createElement("option");o.textContent=e,o.value=e,t.appendChild(o)}))}window.onload=e=>{localStorage.getItem("projects")&&(t=JSON.parse(localStorage.getItem("projects")),n(t),c(t)),localStorage.getItem("items")&&(o=JSON.parse(localStorage.getItem("items")),o.forEach((e=>{l(e.title,e.project)})),console.log(o))},n(t),document.getElementById("newProject").addEventListener("click",(()=>{let e=prompt("Title:");t.push(e),console.log(t),localStorage.setItem("projects",JSON.stringify(t)),console.log(JSON.parse(localStorage.getItem("projects"))),n(t),c(t)})),document.getElementById("submit").addEventListener("click",(t=>{t.preventDefault();const n=new e;n.project=document.getElementById("project").value,n.title=document.getElementById("title").value,n.description=document.getElementById("description").value,n.dueDate=document.getElementById("dueDate").value,n.priority=document.getElementById("priority").value,n.complete=!1,l(n.title,n.project),o.push(n),localStorage.setItem("items",JSON.stringify(o)),console.log(localStorage),console.log(JSON.parse(localStorage.getItem("items"))),console.log(n),console.log(o),document.getElementById("form").reset()})),document.getElementById("clear").addEventListener("click",(()=>{for(let e=o.length-1;e>=0;e--)!0===o[e].complete&&(document.getElementById(o[e].title).parentElement.remove(),o.splice(e,1),localStorage.setItem("items",JSON.stringify(o)))})),document.getElementById("delete").addEventListener("click",(()=>{let e=prompt("which project do you want to delete?");for(let o=0;o<t.length;o++)t[o]===e&&(document.getElementById(t[o]).parentElement.remove(),t.splice(o,1));localStorage.setItem("projects",JSON.stringify(t)),c(t)})),c(t)})();